{"version":3,"file":"react-generate-context.esm.js","sources":["../src/index.tsx"],"sourcesContent":["import * as React from 'react'\n\ntype Children = { children: React.ReactNode }\n\ntype UseGetContextValue<Props, Context> = (props: Props) => Context\n\ntype Options<Context> = {\n  defaultContext?: Context\n  requireProvider?: boolean\n  missingProviderMessage?: string\n}\n\ntype Provider<Props> = (props: Props & Children) => JSX.Element\n\ntype Hook<Context> = () => Context | undefined\n\nconst defaultMissingProviderMessage =\n  'The hook for this context cannot be used outside of its Provider'\n\n/**\n * A function for generating a Provider and Hook for a React Context\n *\n * @arg useGetContextValue - A custom hook function used to get the `value` prop passed to the generated Provider\n * @arg options - Additional options for generating the Context\n */\nexport default function generateContext<Props, Context>(\n  useGetContextValue: UseGetContextValue<Props, Context>,\n  options: Options<Context> = {}\n): [Provider<Props>, Hook<Context>] {\n  const {\n    defaultContext,\n    requireProvider = true,\n    missingProviderMessage = defaultMissingProviderMessage,\n  } = options\n\n  /**\n   * Creates a Context in closure\n   */\n  const Ctx = React.createContext(defaultContext)\n\n  /**\n   * The Provider with which to use this Context\n   */\n  const Provider = (props: Props & Children) => {\n    const value = useGetContextValue(props)\n\n    return <Ctx.Provider value={value}>{props.children}</Ctx.Provider>\n  }\n\n  /**\n   * The hook for consuming the generated Context\n   */\n  const useThisContext = () => {\n    const context = React.useContext(Ctx)\n\n    if (requireProvider && context === undefined) {\n      throw new Error(missingProviderMessage)\n    }\n\n    return context\n  }\n\n  return [Provider, useThisContext]\n}\n"],"names":["defaultMissingProviderMessage","generateContext","useGetContextValue","options","defaultContext","requireProvider","missingProviderMessage","Ctx","React","Provider","props","value","children","useThisContext","context","undefined","Error"],"mappings":";;AAgBA,IAAMA,6BAA6B,GACjC,kEADF;AAGA;;;;;;;SAMwBC,gBACtBC,oBACAC;MAAAA;AAAAA,IAAAA,UAA4B;;;AAE5B,iBAIIA,OAJJ;AAAA,MACEC,cADF,YACEA,cADF;AAAA,uCAEEC,eAFF;AAAA,MAEEA,eAFF,sCAEoB,IAFpB;AAAA,uCAGEC,sBAHF;AAAA,MAGEA,sBAHF,sCAG2BN,6BAH3B;AAMA;;;;AAGA,MAAMO,GAAG,GAAGC,aAAA,CAAoBJ,cAApB,CAAZ;AAEA;;;;AAGA,MAAMK,QAAQ,GAAG,SAAXA,QAAW,CAACC,KAAD;AACf,QAAMC,KAAK,GAAGT,kBAAkB,CAACQ,KAAD,CAAhC;AAEA,WAAOF,aAAA,CAACD,GAAG,CAACE,QAAL;AAAcE,MAAAA,KAAK,EAAEA;KAArB,EAA6BD,KAAK,CAACE,QAAnC,CAAP;AACD,GAJD;AAMA;;;;;AAGA,MAAMC,cAAc,GAAG,SAAjBA,cAAiB;AACrB,QAAMC,OAAO,GAAGN,UAAA,CAAiBD,GAAjB,CAAhB;;AAEA,QAAIF,eAAe,IAAIS,OAAO,KAAKC,SAAnC,EAA8C;AAC5C,YAAM,IAAIC,KAAJ,CAAUV,sBAAV,CAAN;AACD;;AAED,WAAOQ,OAAP;AACD,GARD;;AAUA,SAAO,CAACL,QAAD,EAAWI,cAAX,CAAP;AACD;;;;"}