{"ast":null,"code":"import React,{useEffect,useState,useContext}from'react';import{useLocation}from'react-router-dom';import ProductService from'../services/ProductService';import UserContext from'../../contexts/UserContext';import'./sr.css';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const SearchResultsPage=_ref=>{let{addToCart}=_ref;const[searchResults,setSearchResults]=useState([]);const location=useLocation();const searchQuery=new URLSearchParams(location.search).get('q');const{profile}=useContext(UserContext);useEffect(()=>{if(searchQuery){ProductService.searchProducts(searchQuery).then(data=>setSearchResults(data)).catch(error=>console.error('Error fetching search results:',error));}},[searchQuery]);const truncateTitle=function(title){let maxLines=arguments.length>1&&arguments[1]!==undefined?arguments[1]:2;const words=title.split(' ');if(words.length<=maxLines)return title;return\"\".concat(words.slice(0,maxLines).join(' '),\"...\");};const handleAddToCart=product=>{if(profile){addToCart(product);}else{// Redirect user to login page\nwindow.location.href='/login';}};return/*#__PURE__*/_jsxs(\"div\",{className:\"SearchedProductDisplay\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Search Results for \\\"\",searchQuery,\"\\\"\"]}),\" \",/*#__PURE__*/_jsx(\"br\",{}),searchResults.map(product=>/*#__PURE__*/_jsxs(\"div\",{className:\"searchItem\",children:[/*#__PURE__*/_jsx(\"h2\",{title:product.title,children:truncateTitle(product.title)}),/*#__PURE__*/_jsx(\"img\",{src:product.image,alt:product.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"productInfo\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"$\",product.price]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleAddToCart(product),children:\"+ Cart\"})]})]},product.id))]});};export default SearchResultsPage;","map":{"version":3,"names":["React","useEffect","useState","useContext","useLocation","ProductService","UserContext","jsxs","_jsxs","jsx","_jsx","SearchResultsPage","_ref","addToCart","searchResults","setSearchResults","location","searchQuery","URLSearchParams","search","get","profile","searchProducts","then","data","catch","error","console","truncateTitle","title","maxLines","arguments","length","undefined","words","split","concat","slice","join","handleAddToCart","product","window","href","className","children","map","src","image","alt","price","onClick","id"],"sources":["/workspace/Ecommerce-site/src/components/views/SearchResultsPage.js"],"sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport ProductService from '../services/ProductService'; \nimport UserContext from '../../contexts/UserContext';\nimport './sr.css';\n\nconst SearchResultsPage = ({ addToCart }) => {\n  const [searchResults, setSearchResults] = useState([]);\n  const location = useLocation();\n  const searchQuery = new URLSearchParams(location.search).get('q');\n  const { profile } = useContext(UserContext);\n\n  useEffect(() => {\n    if (searchQuery) {\n      ProductService.searchProducts(searchQuery)\n        .then((data) => setSearchResults(data))\n        .catch((error) => console.error('Error fetching search results:', error));\n    }\n  }, [searchQuery]);\n \n  const truncateTitle = (title, maxLines = 2) => {\n    const words = title.split(' ');\n    if (words.length <= maxLines) return title;\n\n    return `${words.slice(0, maxLines).join(' ')}...`;\n  };\n\n  const handleAddToCart = (product) => {\n    if (profile) {\n      addToCart(product);\n    } else {\n      // Redirect user to login page\n      window.location.href = '/login';\n    }\n  };\n\n  return (\n    <div className=\"SearchedProductDisplay\">\n      <h1>Search Results for \"{searchQuery}\"</h1> <br></br>\n      {searchResults.map((product) => (\n        <div key={product.id} className=\"searchItem\">\n          <h2 title={product.title}>{truncateTitle(product.title)}</h2>\n          <img src={product.image} alt={product.title} />          \n          <div className=\"productInfo\">\n          <p>${product.price}</p>\n          <button onClick={() => handleAddToCart(product)}>+ Cart</button>\n        </div>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default SearchResultsPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}