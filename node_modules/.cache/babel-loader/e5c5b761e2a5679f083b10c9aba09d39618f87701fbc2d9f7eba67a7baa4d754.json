{"ast":null,"code":"import React,{useEffect,useState,useContext}from'react';import'./ProductDisplay.css';import UserContext from'../../contexts/UserContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProductDisplay=_ref=>{let{addToCart}=_ref;const[products,setProducts]=useState([]);const{profile}=useContext(UserContext);useEffect(()=>{fetchProducts();},[]);const fetchProducts=()=>{fetch(\"https://fakestoreapi.com/products\").then(res=>res.json()).then(data=>setProducts(data)).catch(error=>console.error('Error fetching products:',error));};const truncateTitle=function(title){let maxLines=arguments.length>1&&arguments[1]!==undefined?arguments[1]:2;const words=title.split(' ');if(words.length<=maxLines)return title;return\"\".concat(words.slice(0,maxLines).join(' '),\"...\");};const handleAddToCart=product=>{if(profile){addToCart(product);}else{// Redirect user to login page\nwindow.location.href='/login';}};return/*#__PURE__*/_jsx(\"div\",{className:\"ProductDisplay\",children:products.map(product=>/*#__PURE__*/_jsxs(\"div\",{className:\"ProductItem\",children:[/*#__PURE__*/_jsx(\"h2\",{title:product.title,children:truncateTitle(product.title)}),/*#__PURE__*/_jsx(\"img\",{src:product.image,alt:product.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"productInfo\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"$\",product.price]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleAddToCart(product),children:\"+ Cart\"})]})]},product.id))});};export default ProductDisplay;","map":{"version":3,"names":["React","useEffect","useState","useContext","UserContext","jsx","_jsx","jsxs","_jsxs","ProductDisplay","_ref","addToCart","products","setProducts","profile","fetchProducts","fetch","then","res","json","data","catch","error","console","truncateTitle","title","maxLines","arguments","length","undefined","words","split","concat","slice","join","handleAddToCart","product","window","location","href","className","children","map","src","image","alt","price","onClick","id"],"sources":["/workspace/Ecommerce-site/src/components/products/ProductDisplay.js"],"sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\r\nimport './ProductDisplay.css';\r\nimport UserContext from '../../contexts/UserContext';\r\n\r\nconst ProductDisplay = ({ addToCart }) => {\r\n  const [products, setProducts] = useState([]);\r\n  const { profile } = useContext(UserContext);\r\n\r\n  useEffect(() => {\r\n    fetchProducts();\r\n  }, []);\r\n\r\n  const fetchProducts = () => {\r\n    fetch(\"https://fakestoreapi.com/products\")\r\n      .then((res) => res.json())\r\n      .then((data) => setProducts(data))\r\n      .catch((error) => console.error('Error fetching products:', error));\r\n  };\r\n\r\n  const truncateTitle = (title, maxLines = 2) => {\r\n    const words = title.split(' ');\r\n    if (words.length <= maxLines) return title;\r\n\r\n    return `${words.slice(0, maxLines).join(' ')}...`;\r\n  };\r\n\r\n  const handleAddToCart = (product) => {\r\n    if (profile) {\r\n      addToCart(product);\r\n    } else {\r\n      // Redirect user to login page\r\n      window.location.href = '/login';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"ProductDisplay\">\r\n      {products.map((product) => (\r\n        <div key={product.id} className=\"ProductItem\">\r\n          <h2 title={product.title}>{truncateTitle(product.title)}</h2>\r\n          <img src={product.image} alt={product.title} />          \r\n          <div className=\"productInfo\">\r\n          <p>${product.price}</p>\r\n          <button onClick={() => handleAddToCart(product)}>+ Cart</button>\r\n        </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductDisplay;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,CAAEC,UAAU,KAAQ,OAAO,CAC9D,MAAO,sBAAsB,CAC7B,MAAO,CAAAC,WAAW,KAAM,4BAA4B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAErD,KAAM,CAAAC,cAAc,CAAGC,IAAA,EAAmB,IAAlB,CAAEC,SAAU,CAAC,CAAAD,IAAA,CACnC,KAAM,CAACE,QAAQ,CAAEC,WAAW,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAAEY,OAAQ,CAAC,CAAGX,UAAU,CAACC,WAAW,CAAC,CAE3CH,SAAS,CAAC,IAAM,CACdc,aAAa,CAAC,CAAC,CACjB,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAA,aAAa,CAAGA,CAAA,GAAM,CAC1BC,KAAK,CAAC,mCAAmC,CAAC,CACvCC,IAAI,CAAEC,GAAG,EAAKA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACzBF,IAAI,CAAEG,IAAI,EAAKP,WAAW,CAACO,IAAI,CAAC,CAAC,CACjCC,KAAK,CAAEC,KAAK,EAAKC,OAAO,CAACD,KAAK,CAAC,0BAA0B,CAAEA,KAAK,CAAC,CAAC,CACvE,CAAC,CAED,KAAM,CAAAE,aAAa,CAAG,QAAAA,CAACC,KAAK,CAAmB,IAAjB,CAAAC,QAAQ,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,CAAC,CACxC,KAAM,CAAAG,KAAK,CAAGL,KAAK,CAACM,KAAK,CAAC,GAAG,CAAC,CAC9B,GAAID,KAAK,CAACF,MAAM,EAAIF,QAAQ,CAAE,MAAO,CAAAD,KAAK,CAE1C,SAAAO,MAAA,CAAUF,KAAK,CAACG,KAAK,CAAC,CAAC,CAAEP,QAAQ,CAAC,CAACQ,IAAI,CAAC,GAAG,CAAC,QAC9C,CAAC,CAED,KAAM,CAAAC,eAAe,CAAIC,OAAO,EAAK,CACnC,GAAItB,OAAO,CAAE,CACXH,SAAS,CAACyB,OAAO,CAAC,CACpB,CAAC,IAAM,CACL;AACAC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAG,QAAQ,CACjC,CACF,CAAC,CAED,mBACEjC,IAAA,QAAKkC,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAC5B7B,QAAQ,CAAC8B,GAAG,CAAEN,OAAO,eACpB5B,KAAA,QAAsBgC,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC3CnC,IAAA,OAAImB,KAAK,CAAEW,OAAO,CAACX,KAAM,CAAAgB,QAAA,CAAEjB,aAAa,CAACY,OAAO,CAACX,KAAK,CAAC,CAAK,CAAC,cAC7DnB,IAAA,QAAKqC,GAAG,CAAEP,OAAO,CAACQ,KAAM,CAACC,GAAG,CAAET,OAAO,CAACX,KAAM,CAAE,CAAC,cAC/CjB,KAAA,QAAKgC,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC5BjC,KAAA,MAAAiC,QAAA,EAAG,GAAC,CAACL,OAAO,CAACU,KAAK,EAAI,CAAC,cACvBxC,IAAA,WAAQyC,OAAO,CAAEA,CAAA,GAAMZ,eAAe,CAACC,OAAO,CAAE,CAAAK,QAAA,CAAC,QAAM,CAAQ,CAAC,EAC7D,CAAC,GANIL,OAAO,CAACY,EAOb,CACN,CAAC,CACC,CAAC,CAEV,CAAC,CAED,cAAe,CAAAvC,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}