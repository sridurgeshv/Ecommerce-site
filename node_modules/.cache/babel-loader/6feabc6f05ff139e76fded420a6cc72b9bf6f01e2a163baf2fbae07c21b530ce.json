{"ast":null,"code":"import{CognitoUser,CognitoUserAttribute}from'amazon-cognito-identity-js';import{useState}from'react';import UserPool from'../../UserPool';import'./register.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Register(){const[username,setUsername]=useState('');const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[verifyProcess,setVerifyProcess]=useState(false);const[OTP,setOTP]=useState('');const onSubmit=e=>{e.preventDefault();const attributeList=[];attributeList.push(new CognitoUserAttribute({Name:'email',Value:email}));UserPool.signUp(username,password,attributeList,null,(err,data)=>{if(err){console.log(err);alert(\"Couldn't sign up\");}else{console.log(data);setVerifyProcess(true);alert('User Added Successfully');}});};const verifyAccount=e=>{e.preventDefault();const user=new CognitoUser({Username:username,Pool:UserPool});console.log(user);user.confirmRegistration(OTP,true,(err,data)=>{if(err){console.log(err);alert(\"Couldn't verify account\");}else{console.log(data);alert('Account verified successfully');window.location.href='/login';}});};return/*#__PURE__*/_jsx(\"div\",{className:\"register\",children:verifyProcess===false?/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,children:[\"UserName:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:username.toLowerCase().trim(),onChange:e=>setUsername(e.target.value)}),/*#__PURE__*/_jsx(\"br\",{}),\"Email:\",/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:email,onChange:e=>setEmail(e.target.value)}),/*#__PURE__*/_jsx(\"br\",{}),\"Password:\",/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:e=>setPassword(e.target.value)}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"reg\",type:\"submit\",children:\"Register\"})]}):/*#__PURE__*/_jsxs(\"form\",{onSubmit:verifyAccount,children:[\"Enter the OTP:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:OTP,onChange:e=>setOTP(e.target.value)}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Verify\"})]})});}export default Register;","map":{"version":3,"names":["CognitoUser","CognitoUserAttribute","useState","UserPool","jsx","_jsx","jsxs","_jsxs","Register","username","setUsername","email","setEmail","password","setPassword","verifyProcess","setVerifyProcess","OTP","setOTP","onSubmit","e","preventDefault","attributeList","push","Name","Value","signUp","err","data","console","log","alert","verifyAccount","user","Username","Pool","confirmRegistration","window","location","href","className","children","type","value","toLowerCase","trim","onChange","target"],"sources":["/workspace/Ecommerce-site/src/components/auth/Register.js"],"sourcesContent":["import { CognitoUser, CognitoUserAttribute } from 'amazon-cognito-identity-js';\r\nimport { useState } from 'react';\r\nimport UserPool from '../../UserPool';\r\nimport './register.css';\r\n\r\nfunction Register() {\r\n  const [username, setUsername] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [verifyProcess, setVerifyProcess] = useState(false);\r\n  const [OTP, setOTP] = useState('');\r\n\r\n  const onSubmit = (e) => {\r\n    e.preventDefault();\r\n    const attributeList = [];\r\n    attributeList.push(\r\n      new CognitoUserAttribute({\r\n        Name: 'email',\r\n        Value: email,\r\n      })\r\n    );\r\n    UserPool.signUp(username, password, attributeList, null, (err, data) => {\r\n      if (err) {\r\n        console.log(err);\r\n        alert(\"Couldn't sign up\");\r\n      } else {\r\n        console.log(data);\r\n        setVerifyProcess(true);\r\n        alert('User Added Successfully');\r\n      }\r\n    });\r\n  };\r\n\r\n  const verifyAccount = (e) => {\r\n    e.preventDefault();\r\n    const user = new CognitoUser({\r\n      Username: username,\r\n      Pool: UserPool,\r\n    });\r\n    console.log(user);\r\n    user.confirmRegistration(OTP, true, (err, data) => {\r\n      if (err) {\r\n        console.log(err);\r\n        alert(\"Couldn't verify account\");\r\n      } else {\r\n        console.log(data);\r\n        alert('Account verified successfully');\r\n        window.location.href = '/login';\r\n      }\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"register\">\r\n      {verifyProcess === false ? (\r\n        <form onSubmit={onSubmit}>\r\n          UserName:\r\n          <input\r\n            type=\"text\"\r\n            value={username.toLowerCase().trim()}\r\n            onChange={(e) => setUsername(e.target.value)}\r\n          />\r\n          <br />\r\n          Email:\r\n          <input\r\n            type=\"email\"\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n          />\r\n          <br />\r\n          Password:\r\n          <input\r\n            type=\"password\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n          />\r\n          <br />\r\n          <button className=\"reg\" type=\"submit\">Register</button>\r\n        </form>\r\n      ) : (\r\n        <form onSubmit={verifyAccount}>\r\n          Enter the OTP:\r\n          <input\r\n            type=\"text\"\r\n            value={OTP}\r\n            onChange={(e) => setOTP(e.target.value)}\r\n          />\r\n          <br />\r\n          <button type=\"submit\">Verify</button>\r\n        </form>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Register;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}