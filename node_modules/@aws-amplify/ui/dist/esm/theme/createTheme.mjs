import e from"style-dictionary/lib/utils/deepExtend.js";import n from"style-dictionary/lib/utils/flattenProperties.js";import{defaultTheme as o}from"./defaultTheme.mjs";import{setupTokens as t,cssNameTransform as a,cssValue as i}from"./utils.mjs";const r=({token:e,path:n})=>{const o=`--${a({path:n})}`,{value:t}=e,r=i(e);return{name:o,original:t,path:n,value:r,toString:()=>`var(${o})`}};function s(a,i=o){const s=e([{},i,a]),m=t({tokens:s.tokens,setupToken:r}),{breakpoints:l,name:p}=s;let d=`[data-amplify-theme="${p}"] {\n`+n(m).map((e=>`${e.name}: ${e.value};`)).join("\n")+"\n}\n",c=[];return s.overrides&&(c=s.overrides.map((e=>{const o=t({tokens:e.tokens,setupToken:r}),a=n(o).map((e=>`${e.name}: ${e.value};`)).join("\n");if("selector"in e&&(d+=`\n${e.selector} {\n${a}\n}\n`),"mediaQuery"in e&&(d+=`\n@media (${e.mediaQuery}) {\n  [data-amplify-theme="${p}"] {\n    ${a}\n  }\n}\n`),"breakpoint"in e){const n=s.breakpoints.values[e.breakpoint];d+=`\n@media (min-width: ${n}px) {\n  [data-amplify-theme="${p}"] {\n    ${a}\n  }\n}\n`}return"colorMode"in e&&(d+=`\n@media (prefers-color-scheme: ${e.colorMode}) {\n          [data-amplify-theme="${p}"][data-amplify-color-mode="system"] {\n            ${a}\n            color-scheme: ${e.colorMode};\n          }\n        }\n`,d+=`\n[data-amplify-theme="${p}"][data-amplify-color-mode="${e.colorMode}"] {\n          ${a}\n          color-scheme: ${e.colorMode};\n        }\n`),Object.assign(Object.assign({},e),{tokens:o})}))),{tokens:m,breakpoints:l,name:p,cssText:d,overrides:c}}export{s as createTheme};
