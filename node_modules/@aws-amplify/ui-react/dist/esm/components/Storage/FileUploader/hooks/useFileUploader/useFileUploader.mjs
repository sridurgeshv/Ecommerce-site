import{returnAcceptedFiles as e,checkMaxSize as t}from"@aws-amplify/ui";import{useState as r}from"react";import{FileState as a}from"../../types.mjs";function n({maxSize:n,acceptedFileTypes:o,hasMultipleFiles:s,isLoading:i,setAutoLoad:l}){const[p,f]=r([]),[g,u]=r(!1),[c,h]=r(!1),D=(e,r)=>{const o=[...r];[...e].forEach((e=>{const r=t(n,e);o.unshift({fileState:r?a.ERROR:a.INIT,fileErrors:r,file:e,name:e.name})})),f(o)},m=t=>{const r=e([...t],o);return r?!s&&p.length>0?p.length:s||1!=r.length?!s&&r.length>1?(D([r[0]],p),1):r.length>0?(D([...r],p),r.length+p.length):0:(D([...r],p),r.length):0};return{inDropZone:c,onDragEnter:e=>{e.preventDefault(),e.stopPropagation()},onDragLeave:e=>{if(e.preventDefault(),e.stopPropagation(),i)return!1;h(!1)},onDragOver:e=>{if(e.preventDefault(),e.stopPropagation(),i)return!1;h(!0),e.dataTransfer.dropEffect="copy"},onDragStart:e=>{e.dataTransfer.clearData()},onDrop:e=>{if(e.preventDefault(),e.stopPropagation(),i)return!1;const{files:t}=e.dataTransfer;m([...t])>0&&(u(!0),l(!0)),h(!1)},setInDropZone:h,setShowPreviewer:u,addTargetFiles:m,showPreviewer:g,fileStatuses:p,setFileStatuses:f}}export{n as default};
