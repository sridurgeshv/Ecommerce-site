import{__awaiter as i}from"tslib";import e from"react";import{getLogger as t,translate as m,deleteUser as r}from"@aws-amplify/ui";import{useAuth as s}from"../../../hooks/useAuth.mjs";import"@aws-amplify/datastore";import"@aws-amplify/ui-react-core";import"@aws-amplify/storage";import"../../ThemeProvider/AmplifyContext.mjs";import"../../../primitives/shared/constants.mjs";import"aws-amplify";import"../../../helpers/constants.mjs";import"../../../primitives/Alert/AlertIcon.mjs";import"classnames";import"../../../primitives/View/View.mjs";import"../../../primitives/Icon/context/IconsContext.mjs";import"../../../primitives/Field/FieldClearButton.mjs";import"../../../primitives/Field/FieldDescription.mjs";import"../../../primitives/Field/FieldErrorMessage.mjs";import"../../../primitives/Field/Field.mjs";import"../../../primitives/Alert/Alert.mjs";import"../../../primitives/Autocomplete/Autocomplete.mjs";import"../../../primitives/Badge/Badge.mjs";import"../../../primitives/Breadcrumbs/Breadcrumbs.mjs";import"../../../primitives/Button/Button.mjs";import"../../../primitives/ButtonGroup/ButtonGroup.mjs";import"../../../primitives/Card/Card.mjs";import"../../../primitives/CheckboxField/CheckboxField.mjs";import"../../../primitives/Collection/Collection.mjs";import"../../../primitives/Divider/Divider.mjs";import"../../../primitives/DropZone/DropZone.mjs";import"../../../primitives/Expander/Expander.mjs";import"../../../primitives/Expander/ExpanderItem.mjs";import"../../../primitives/FieldGroupIcon/FieldGroupIcon.mjs";import"../../../primitives/FieldGroupIcon/FieldGroupIconButton.mjs";import"../../../primitives/Fieldset/Fieldset.mjs";import"../../../primitives/Fieldset/useFieldset.mjs";import{Flex as o}from"../../../primitives/Flex/Flex.mjs";import"../../../primitives/Grid/Grid.mjs";import"../../../primitives/Heading/Heading.mjs";import"../../../primitives/HighlightMatch/HighlightMatch.mjs";import"../../../primitives/Icon/Icon.mjs";import"../../../primitives/Image/Image.mjs";import"../../../primitives/Input/Input.mjs";import"../../../primitives/Label/Label.mjs";import"../../../primitives/Link/Link.mjs";import"../../../primitives/Loader/Loader.mjs";import"../../../primitives/Menu/Menu.mjs";import"../../../primitives/Menu/MenuButton.mjs";import"../../../primitives/Menu/MenuItem.mjs";import"../../../primitives/Message/Message.mjs";import"../../../primitives/Pagination/Pagination.mjs";import"../../../primitives/PasswordField/PasswordField.mjs";import"../../../primitives/PhoneNumberField/PhoneNumberField.mjs";import"../../../primitives/Placeholder/Placeholder.mjs";import"../../../primitives/Radio/Radio.mjs";import"../../../primitives/RadioGroupField/RadioGroupField.mjs";import"../../../primitives/Rating/Rating.mjs";import"../../../primitives/ScrollView/ScrollView.mjs";import"../../../primitives/SearchField/SearchField.mjs";import"../../../primitives/SelectField/SelectField.mjs";import"../../../primitives/SliderField/SliderField.mjs";import"../../../primitives/StepperField/StepperField.mjs";import"../../../primitives/SwitchField/SwitchField.mjs";import"../../../primitives/Table/Table.mjs";import"../../../primitives/Table/TableBody.mjs";import"../../../primitives/Table/TableCell.mjs";import"../../../primitives/Table/TableFoot.mjs";import"../../../primitives/Table/TableHead.mjs";import"../../../primitives/Table/TableRow.mjs";import"../../../primitives/Tabs/Tabs.mjs";import"../../../primitives/Text/Text.mjs";import"../../../primitives/TextAreaField/TextAreaField.mjs";import"../../../primitives/TextField/TextField.mjs";import"../../../primitives/ToggleButton/ToggleButton.mjs";import"../../../primitives/ToggleButtonGroup/ToggleButtonGroup.mjs";import"../../../primitives/VisuallyHidden/VisuallyHidden.mjs";import{ComponentClassName as p}from"../constants.mjs";import l from"./defaults.mjs";const a=t("Auth");function n({components:t,onSuccess:n,onError:d,handleDelete:u}){const[j,v]=e.useState("IDLE"),[c,F]=e.useState(null),g=m("Delete Account"),{user:T,isLoading:b}=s(),{ErrorMessage:I,DeleteButton:h,WarningView:E}=e.useMemo((()=>Object.assign(Object.assign({},l),null!=t?t:{})),[t]),D=e.useCallback((()=>i(this,void 0,void 0,(function*(){if(T){v("DELETING"),c&&F(null);try{u?yield u(T):yield r(),v("DONE"),null==n||n()}catch(i){const e=i;v("ERROR"),F(e.message),null==d||d(e)}}}))),[c,u,d,n,T]),f=e.useCallback((()=>{v("IDLE")}),[]),B=e.useCallback((()=>{D()}),[D]);return b?null:T?"DONE"===j?null:e.createElement(o,{className:p.DeleteUser,direction:"column"},e.createElement(h,{isDisabled:"CONFIRMATION"===j||"DELETING"===j,onClick:i=>{i.preventDefault(),v("CONFIRMATION")}},g),"CONFIRMATION"===j||"DELETING"===j?e.createElement(E,{onCancel:f,isDisabled:"DELETING"===j,onConfirm:B}):null,c?e.createElement(I,null,c):null):(a.warn("<DeleteUser /> requires user to be authenticated."),null)}n.ErrorMessage=l.ErrorMessage,n.DeleteButton=l.DeleteButton,n.WarningView=l.WarningView;export{n as default};
