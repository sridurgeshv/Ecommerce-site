import{__awaiter as e}from"tslib";import{Hub as s,DataStore as t}from"aws-amplify";import{UI_CHANNEL as o,ACTION_DATASTORE_CREATE_STARTED as i,EVENT_ACTION_DATASTORE_CREATE as m,ACTION_DATASTORE_CREATE_FINISHED as a}from"./constants.mjs";import{getErrorMessage as r}from"../../helpers/utils.mjs";import{AMPLIFY_SYMBOL as d}from"../../helpers/constants.mjs";import{useTypeCastFields as n}from"./shared/useTypeCastFields.mjs";const l=({model:l,fields:p,schema:c})=>{const f=n({fields:p,modelName:l.name,schema:c});return()=>e(void 0,void 0,void 0,(function*(){try{s.dispatch(o,{event:i,data:{fields:f}},m,d);const e=yield t.save(new l(f));s.dispatch(o,{event:a,data:{fields:f,item:e}},m,d)}catch(e){s.dispatch(o,{event:a,data:{fields:f,errorMessage:r(e)}},m,d)}}))};export{l as useDataStoreCreateAction};
