import*as e from"react";import{isFunction as a}from"@aws-amplify/ui";const l=({max:e,min:a,step:l,value:n})=>{const t=(n-a)%l;return n=n-t+Math.round(t/l)*l,(n=Math.max(a,n))>e&&(n=e-(e-a)%l),n},n=({defaultValue:n=0,value:t,step:u=1,max:s=Number.MAX_SAFE_INTEGER,min:r=Number.MIN_SAFE_INTEGER,isDisabled:o,isReadOnly:i,onChange:c,onDecrease:m,onIncrease:d,onStepChange:h})=>{var p,v;const b=void 0!==t;s=Math.max(r,s);const[x,C]=e.useState((()=>l({min:r,max:s,step:u,value:n}))),I=b?l({min:r,max:s,step:u,value:t}):x,N=null!==(p=null!=o?o:i)&&void 0!==p?p:I+u>s,g=null!==(v=null!=o?o:i)&&void 0!==v?v:I-u<r,[D,E]=e.useState(I),f=e.useCallback((e=>{E(e.target.value),a(c)&&c(e)}),[c]),k=e.useCallback((e=>{const n=parseFloat(e.target.value);if(isNaN(n))return;const t=l({min:r,max:s,step:u,value:n});b||C(t),a(h)&&h(t),E(t)}),[r,s,u,b,h]),M=e.useCallback((()=>{b||C(I+u),a(h)&&h(I+u),a(d)&&d(),E(I+u)}),[u,I,b,d,h]),S=e.useCallback((()=>{b||C(I-u),a(h)&&h(I-u),a(m)&&m(),E(I-u)}),[u,I,b,m,h]),O=e.useCallback((e=>{e.currentTarget.blur()}),[]);return{step:u,value:I,inputValue:D,handleDecrease:S,handleIncrease:M,handleOnBlur:k,handleOnChange:f,handleOnWheel:O,setInputValue:E,shouldDisableDecreaseButton:g,shouldDisableIncreaseButton:N}};export{n as useStepper};
