import{__rest as e}from"tslib";import t from"classnames";import*as a from"react";import r from"lodash/debounce.js";import{Flex as s}from"../Flex/Flex.mjs";import{Grid as l}from"../Grid/Grid.mjs";import{Text as i}from"../Text/Text.mjs";import{Pagination as n}from"../Pagination/Pagination.mjs";import{usePagination as o}from"../Pagination/usePagination.mjs";import{SearchField as m}from"../SearchField/SearchField.mjs";import{ComponentClassNames as c,ComponentText as d}from"../shared/constants.mjs";import{strHasLength as h}from"../shared/utils.mjs";import{getPageCount as u,getItemsAtPage as g,itemHasText as p}from"./utils.mjs";const j=10,f=t=>{var{children:r,direction:l="column",items:i}=t,n=e(t,["children","direction","items"]);return a.createElement(s,Object.assign({direction:l},n),Array.isArray(i)?i.map(r):null)},P=t=>{var{children:r,items:s}=t,i=e(t,["children","items"]);return a.createElement(l,Object.assign({},i),Array.isArray(s)?s.map(r):null)},b=l=>{var{className:b,isSearchable:C,isPaginated:E,items:N,itemsPerPage:y=j,searchFilter:F=p,searchLabel:A=d.Collection.searchButtonLabel,searchNoResultsFound:S,searchPlaceholder:x,type:I="list",testId:O}=l,v=e(l,["className","isSearchable","isPaginated","items","itemsPerPage","searchFilter","searchLabel","searchNoResultsFound","searchPlaceholder","type","testId"]);const[L,R]=a.useState(),G=a.useCallback(r(R,300),[R]);N=Array.isArray(N)?N:[],C&&h(L)&&(N=N.filter((e=>F(e,L))));const T=o({totalPages:u(N.length,y)});E&&(N=g(N,T.currentPage,y));const k="list"===I?a.createElement(f,Object.assign({className:c.CollectionItems,items:N},v)):"grid"===I?a.createElement(P,Object.assign({className:c.CollectionItems,items:N},v)):null;return a.createElement(s,{testId:O,className:t(c.Collection,b)},C?a.createElement(s,{className:c.CollectionSearch},a.createElement(m,{label:A,placeholder:x,onChange:e=>G(e.target.value),onClear:()=>R("")})):null,((e,t,r)=>t.length?e:r||a.createElement(s,{justifyContent:"center"},a.createElement(i,null,d.Collection.searchNoResultsFound)))(k,N,S),E?a.createElement(s,{className:c.CollectionPagination},a.createElement(n,Object.assign({},T))):null)};b.displayName="Collection";export{b as Collection};
