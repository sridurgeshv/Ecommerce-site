import*as e from"react";import{isFunction as a}from"@aws-amplify/ui";import{ESCAPE_KEY as l,ENTER_KEY as o}from"../shared/constants.mjs";import{useComposeRefsCallback as n}from"../../hooks/useComposeRefsCallback.mjs";const s=new Set([l,o]),t=({defaultValue:t="",value:r,onChange:u,onClear:c,onSubmit:m,externalRef:f})=>{const i=void 0!==r,[C,p]=e.useState(t),d=i?r:C,k=e.useRef(null),b=n({externalRef:f,internalRef:k}),v=e.useCallback((()=>{var e;i||p(""),null===(e=null==k?void 0:k.current)||void 0===e||e.focus(),a(c)&&c()}),[i,p,c]),h=e.useCallback((e=>{a(m)&&m(e)}),[m]),R=e.useCallback((e=>{const{key:a}=e;s.has(a)&&(e.preventDefault(),a===l?v():a===o&&h(d))}),[d,v,h]),g=e.useCallback((e=>{i||p(e.target.value),a(u)&&u(e)}),[i,u,p]),w=e.useCallback((()=>{h(d)}),[h,d]);return{composedValue:d,onClearHandler:v,onKeyDown:R,onClick:w,handleOnChange:g,composedRefs:b}};export{t as useSearchField};
